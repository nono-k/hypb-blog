---
title: Astroã§Swiperã‚’ä½¿ã†
slug: astrojs-swiper-01
pubDate: '2024-05-03'
image: ../../../assets/images/astrojs-swiper-01.jpg
ogp: 'images/ogp/astrojs-swiper-01.jpg'
category: Coding
tags:
  - Astro
  - Swiper
  - GSAP
description: Astroã§ã®Swiperã®ä½¿ã„æ–¹ã€‚å½“ãƒ–ãƒ­ã‚°ã®ãƒˆãƒƒãƒ—ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è§£èª¬ã—ã¾ã™ã€‚
relatedPosts:
  - astro-template
  - fadein-01
---
import Note from '../../../components/markdown/note.astro';

## ã¯ã˜ã‚ã«

ã“ã®ãƒ–ãƒ­ã‚°ã¯Astroã§ä½œã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€[ãƒˆãƒƒãƒ—](https://hypb.dev)ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§Swiperã‚’ä½¿ã£ã¦å®Ÿè£…ã—ãŸã®ã§è§£èª¬ã—ã¾ã™ã€‚ã¾ãŸã€ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã¯GSAPã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã‚‚è§£èª¬ã—ã¾ã™ã€‚

ğŸ‘‡CodeSandboxã§ã®ãƒ‡ãƒ¢

https://codesandbox.io/p/devbox/swiper-parallax-text-stagger-fadein-with-gsap-d2fg8y?file=%2Fsrc%2Fcomponents%2Fslider.astro

çµè«–ã¨ã—ã¦ã¯ã€Astroãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã‚‚å•é¡ŒãªãSwiperã€GSAPã¯ä½¿ãˆã¾ã™ã€‚
ãŸã ã—ã€Navigationã€Autoplayã€Parallaxãªã©ã‚’ä½¿ã†ã¨ãã«`swiper/modules`ã‹ã‚‰importã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã‚Œã§ã¯è¦‹ã¦ã„ãã¾ã—ã‚‡ã†

### ç’°å¢ƒ

<Note
  text="<ul>
          <li>Astro: 4.5.15</li>
          <li>Swiper: 11.1.1</li>
          <li>GSAP: 3.12.5</li>
          </ul>"/>

## å½“ãƒ–ãƒ­ã‚°ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®å®Ÿè£…æ–¹æ³•

[ãƒˆãƒƒãƒ—](https://hypb.dev)ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§ã¯ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åˆ‡ã‚Šæ›¿ã‚ã‚Šæ™‚ã«ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã•ã›ãƒ†ã‚­ã‚¹ãƒˆã‚‚ä¸‹ã‹ã‚‰ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã™ã‚‹å½¢ã«ãªã‚Šã¾ã™ã€‚
ã¾ãŸã€å·¦å´ãŒãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã€å³å´ãŒç”»åƒã¨ãªã£ã¦ã„ã¾ã™ã®ã§ã“ã¡ã‚‰ã‚’ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—ã—ã¾ã—ã‚‡ã†ã€‚

```js title="slider.astro"
<div class="swiper">
  <div class="swiper-wrapper">
    {
      Array.from({ length: 5 }, (_, index) => {
        return (
          <div class="swiper-slide">
            <div class="swiper-container" data-swiper-parallax-x="100%">
              <div class="image" data-swiper-parallax-scale="1.5">
                <img src={`https://picsum.photos/800/400?random=${index}`} alt="" />
              </div>
              <div class=`bg bg-${index}`>
                <div class="bg-title">
                  <h2>{`Sample0${index}`}</h2>
                </div>
                <ul>
                  <li class="item">tag01</li>
                  <li class="item">tag02</li>
                  <li class="item">tag03</li>
                </ul>
              </div>
            </div>
          </div>
        );})
      }
  </div>
  <div class="swiper-button-next"></div>
  <div class="swiper-button-prev"></div>
</div>

<style lang="scss">
  .swiper {
    width: 70vw;
    height: 500px;
  }
  .swiper-slide {
    display: flex;
    flex-direction: row-reverse;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  .swiper-container {
    position: relative;
    width: 100%;
  }
  .image {
    width: 50%;
    height: 100%;
    position: absolute;
    top: 0;
    right: 0;
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
  .bg {
    width: 50%;
    color: #fff;
    display: flex;
    flex-direction: column;
    gap: 16px;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    &.bg-0 {
      background: orange;
    }
    &.bg-1 {
      background: blue;
    }
    &.bg-2 {
      background: purple;
    }
    &.bg-3 {
      background: red;
    }
    &.bg-4 {
      background: black;
    }
  }
  .bg-title {
    overflow: hidden;
  }
  ul {
    display: flex;
    gap: 8px;
    overflow: hidden;
  }
  li {
    list-style: none;
  }
</style>
```

ã“ã“ã§ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã•ã›ã‚‹ãŸã‚`swiper-container`ã«`data-swiper-parallax-x="100%"`ã‚’ä»˜ã‘ã¾ã™ã€‚
ã¾ãŸã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åˆ‡ã‚Šæ›¿ã‚ã‚Šæ™‚ã«ç”»åƒã‚’æ‹¡å¤§ã™ã‚‹ãŸã‚ã«`image`ã«ã‚‚`data-swiper-parallax-scale="1.5"`ã‚’ä»˜ã‘ã¾ã™ã€‚Swiperã®ãƒ‘ãƒ©ãƒ©ãƒƒã‚¯ã‚¹ã«é–¢ã—ã¦ã®å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯[ã“ã¡ã‚‰](https://swiperjs.com/swiper-api#parallax)ã§ã™ã€‚

### scriptã®ã‚³ãƒ¼ãƒ‰

scriptã¯ä»¥ä¸‹ã«ãªã‚Šã¾ã™ã€‚

```js title="slider.astro"
// ...
<script>
  import Swiper from "swiper";
  import "swiper/css/bundle";
  import { Autoplay, Parallax, Navigation } from "swiper/modules";
  import { gsap } from "gsap";

  const swiper = new Swiper(".swiper", {
    modules: [Autoplay, Parallax, Navigation],
    slidesPerView: 1,
    spaceBetween: 0,
    loop: true,
    loopAdditionalSlides: 1,
    parallax: true,
    speed: 1500,
     autoplay: {
       delay: 5000,
     },
    navigation: {
      nextEl: ".swiper-button-next",
      prevEl: ".swiper-button-prev",
    },
    on: {
      slideChangeTransitionStart: () => {
        gsap.from(".bg h2", {
          y: "100px",
          duration: 1,
        });
        gsap.from(".item", {
          y: "100px",
          duration: 0.8,
          delay: 0.1,
          stagger: {
            each: 0.1,
          },
        });
      },
    },
  });
</script>
```

ã¯ã˜ã‚ã«ã§è¿°ã¹ã¾ã—ãŸãŒã€Navigationã€Autoplayã€Parallaxãªã©ã‚’ä½¿ã†ã¨ãã«`swiper/modules`ã‹ã‚‰importã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã¾ãŸã€Swiperã‚’åˆæœŸåŒ–ã™ã‚‹ã¨ãã«`modules: [Autoplay, Parallax, Navigation]`ã‚’è¿½åŠ ã—ã¾ã™ã€‚

### GSAPã«ã¤ã„ã¦

ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼åˆ‡æ›¿æ™‚ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã•ã›ãŸã„ã®ã§ã€`slideChangeTransitionStart`ã§GSAPã§ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¾ã™ã€‚

```js title="slider.astro"
// ...
const swiper = new Swiper(".swiper", {
    // ...
    on: {
      slideChangeTransitionStart: () => {
        gsap.from(".bg h2", {
          y: "100px",
          duration: 1,
        });
        gsap.from(".item", {
          y: "100px",
          duration: 0.8,
          delay: 0.1,
          stagger: {
            each: 0.1,
          },
        });
      },
    },
  });
```

## ã¾ã¨ã‚

å½“ãƒ–ãƒ­ã‚°ã®ãƒˆãƒƒãƒ—ã®ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã‚’ä¾‹ã«Astroã§ã®Swiperã®ä½¿ã„æ–¹ã‚’è§£èª¬ã—ã¾ã—ãŸã€‚
Astroã§ã‚‚å•é¡ŒãªãSwiperã‚’ä½¿ãˆã‚‹ã“ã¨ãŒç¢ºèªã§ãè‰¯ã‹ã£ãŸã§ã™ã€‚

ã“ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚